<template>
  <div class="p-4">
    <h1 class="text-2xl font-bold mb-4">ç·šä¸Šå¡”ç¾…ç‰ŒéŠæˆ²</h1>
    <button @click="drawCards" class="bg-purple-600 text-white px-4 py-2 rounded">
      æŠ½ä¸‰å¼µç‰Œ ğŸ”®
    </button>

    <div v-if="cards.length" class="mt-6 space-y-4">
      <div v-for="(card, index) in cards" :key="index" class="p-4 border rounded shadow">
        <h2 class="text-xl font-semibold">ç¬¬ {{ index + 1 }} å¼µ - {{ card.card.name }}ï¼ˆ{{ card.position }}ï¼‰</h2>
        <!-- é€™è£¡æˆ‘è¦å†åŠ ä¸Šåœ–ç‰‡ -->
         <!-- <img
          v-if="card.card.image"
          :src="getImageUrl(card.card.image)"
          alt="å¡”ç¾…ç‰Œåœ–ç‰‡"
          class="w-32 h-auto my-2"
        /> -->
        <p>{{ card.meaning }}</p>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue' //å¾ Vue ä¸­åŒ¯å…¥ refï¼Œç”¨ä¾†å»ºç«‹éŸ¿æ‡‰å¼è®Šæ•¸ã€‚

const cards = ref([]) //å»ºç«‹ä¸€å€‹ç©ºçš„é™£åˆ— cardsï¼Œç”¨ä¾†å­˜æ”¾æŠ½åˆ°çš„å¡”ç¾…ç‰Œè³‡è¨Šã€‚

const drawCards = async () => {
  const res = await fetch('http://127.0.0.1:8000/api/draw_cards/') // å‘æœ¬åœ°å¾Œç«¯ç™¼é€ GET è«‹æ±‚
  cards.value = await res.json() //è§£æå›å‚³çš„ JSONï¼ŒæŒ‡æ´¾çµ¦ cards.valueï¼Œè§¸ç™¼ç•«é¢æ›´æ–°ã€‚
}
</script>